<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YouTube Audio Player</title>
<style>
  body{font-family:sans-serif; margin:20px;}
  #results div{
    cursor:pointer; margin:10px 0; display:flex; align-items:center;
    border:1px solid #ddd; padding:5px; border-radius:5px;
  }
  #results img{width:120px; margin-right:10px; border-radius:5px;}
  #youtube-player{width:0; height:0; border:0;} /* hidden iframe for audio */
  button{margin:5px; padding:8px 15px;}
  input[type="text"]{padding:8px; width:60%;}
</style>
</head>
<body>

<h2>YouTube Audio Player</h2>

<input type="text" id="search-box" placeholder="Search YouTube...">
<button onclick="searchVideo()">Search</button>

<div id="results"></div>

<div>
  <button onclick="playPauseSong()">Play/Pause</button>
  Volume: <input type="range" id="volume" min="0" max="100" value="50" onchange="setVolume(this.value)">
</div>

<iframe id="youtube-player" frameborder="0" allow="autoplay"></iframe>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player;
let playerReady = false;

// YouTube IFrame API ready
function onYouTubeIframeAPIReady() {
    player = new YT.Player('youtube-player', {
        events: {
            'onReady': () => { playerReady = true; }
        }
    });
}

// Search function
async function searchVideo() {
    const query = document.getElementById('search-box').value;
    if(!query) return alert("Please type something to search!");

    const apiKey = 'AIzaSyAWmTfbLo_lUooiHeOkKhevEFQnypwSNG8'; // সরাসরি Key
    const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&maxResults=10&key=${apiKey}`);
    const data = await res.json();

    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = '';
    data.items.forEach(item => {
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const thumb = item.snippet.thumbnails.default.url;

        const div = document.createElement('div');
        div.innerHTML = `<img src="${thumb}" alt=""><span>${title}</span>`;
        div.onclick = () => playAudio(videoId);
        resultsDiv.appendChild(div);
    });
}

// Play audio
function playAudio(videoId) {
    if(!playerReady) return alert("Player is not ready yet!");
    player.loadVideoById(videoId);
}

// Play/Pause
function playPauseSong() {
    if(!playerReady) return;
    if(player.getPlayerState() === YT.PlayerState.PLAYING) player.pauseVideo();
    else player.playVideo();
}

// Volume
function setVolume(v) {
    if(playerReady) player.setVolume(v);
}
</script>
</body>
</html>
