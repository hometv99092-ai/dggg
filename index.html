<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YouTube Audio Only</title>

<style>
body { font-family: sans-serif; margin: 20px; }
.result {
  display: flex;
  gap: 10px;
  cursor: pointer;
  margin: 10px 0;
  border: 1px solid #ddd;
  padding: 6px;
}
.result img { width: 120px; }
#player { width:1px; height:1px; }
</style>
</head>

<body>

<h3>YouTube Audio Only</h3>

<input id="q" placeholder="Search YouTube">
<button onclick="search()">Search</button>

<div id="results"></div>

<div id="player"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player;
let selectedVideo = null;

function onYouTubeIframeAPIReady(){
  player = new YT.Player('player', {
    height:'1',
    width:'1',
    playerVars:{ playsinline:1 },
  });
}

async function search(){
  const q = document.getElementById('q').value;
  const key = 'AIzaSyAWmTfbLo_lUooiHeOkKhevEFQnypwSNG8';

  const r = await fetch(
    `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(q)}&type=video&maxResults=10&key=${key}`
  );
  const d = await r.json();

  const box = document.getElementById('results');
  box.innerHTML = '';

  d.items.forEach(v=>{
    const div = document.createElement('div');
    div.className = 'result';
    div.innerHTML = `
      <img src="${v.snippet.thumbnails.default.url}">
      <span>${v.snippet.title}</span>
    `;
    div.onclick = ()=> play(v.id.videoId);
    box.appendChild(div);
  });
}

function play(id){
  player.loadVideoById(id);
}
</script>

</body>
</html>
